!function(a){"use strict";function b(a,b,c){var d,e;if(a){if(a.forEach===Array.prototype.forEach)return a.forEach(b,c);if(a.length===+a.length)for(d=0,e=a.length;e>d;d++)b.call(c||a,a[d],d,a);else{var f=Object.keys(a);for(d=0,e=f.length;e>d;d++){var g=f[d];b.call(c||a,a[g],g,a)}}}}function c(a){return b([].slice.call(arguments,1),function(c){b(c,function(b,c){a[c]=b})}),a}function d(a,b){function d(){this.constructor=a}return c(a,b),d.prototype=parent.prototype,a.prototype=new d,a.__super__=parent.prototype,a}function e(){this.events={},this.context=null}function f(a){e.call(this),this.element=a,this.proxied={}}function g(a){var b=a.indexOf(" ");return b>0?a.substr(0,b):a}function h(a){var b=a.indexOf(" ");return b>0?a.substr(b):""}function i(a,b){"string"!=typeof a&&(a=a.type);var d=-1!=["click","mousedown","mouseup","mousemove"].indexOf(a),e=document.createEvent(d?"MouseEvent":"Event");return b&&c(e,b),e.initEvent(a,!0,!0),e}e.prototype.bind=function(a,b){var c=this.events[a]||(this.events[a]=[]);return c.push(b),this},e.prototype.unbind=function(a,c){var d=this,e=this.events[a];return"*"===a?c?b(this.events,function(a,b){d.unbind(b,c)}):this.events={}:c&&e?(e.splice(e.indexOf(c),1),0===e.length&&delete this.events[a]):delete this.events[a],this},e.prototype.emit=function(a){var b=this.events[a],c=this.context||this;if(b)for(var d=b.slice(0),e=[].slice.call(arguments,1),f=b.length,g=-1;++g<f;)d[g].apply(c,e);return this},e.prototype.once=function(a,b){function c(){b.apply(d,arguments),d.unbind(a,b)}var d=this;return this.bind(a,c)},d(f,e),f.prototype._proxy=function(a){return function(b){var c=h(a),d=this.element;if(c){for(d=b.target;d&&d!=c;)d=d!==this.element&&d.parentNode;if(!d||d==this.element)return}this.context=d,this.emit(a,b,this.element)}.bind(this)},f.prototype.proxy=function(a){return this.proxied[a]||(this.proxied[a]=this._proxy(a))},f.prototype.bind=function(a,b){return e.prototype.bind.call(this,a,b),this.proxied[a]||this.element.addEventListener(g(a),this.proxy(a),!1),this},f.prototype.unbind=function(a,c){if(a.indexOf("*")>=0){var d=this,f=new RegExp("^"+a.replace("*","\\b"));b(this.events,function(a,b){f.test(b)&&d.unbind(b,c)})}else{var h=this.proxied[a];e.prototype.unbind.call(this,a,c),!this.events[a]&&h&&(this.element.removeEventListener(g(a),h,!1),delete this.proxied[a])}return this},f.prototype.destroy=function(){return this.unbind("*")},f.prototype.trigger=function(a,b){return a instanceof window.Event||(a=i(a)),a.data=b,this.element.dispatchEvent(a),this};var j={Emitter:e,DOMEmitter:f};"undefined"!=typeof module&&module.exports?module.exports=j:a.Buss=j}(this);